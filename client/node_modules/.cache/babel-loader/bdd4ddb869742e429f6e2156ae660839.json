{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Zabid\\\\NS\\\\blogsMajorProject\\\\client\\\\src\\\\components\\\\UpdateProfile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport Layout from \"./Layout\";\nimport Uploadimage from \"./Uploadimage\";\nimport { useSelector } from \"react-redux\";\n\nconst UpdateProfile = () => {\n  const history = useHistory();\n  const [currentProfile, setCurrentprofile] = useState({\n    name: \"\",\n    profileImgPath: \"\",\n    buttonText: \"Save changes\",\n    id: \"\"\n  });\n  const uploadInfo = useSelector(state => state);\n  const profileImg = uploadInfo.imageID;\n  const imgPath = uploadInfo.imgPath;\n  let email = localStorage.getItem(\"userEmailInLocalStorage\");\n  useEffect(() => {\n    Axios.post(\"http://localhost:8000/blogs/get-user-details\", {\n      email\n    }).then(res => {\n      console.log(\"Success in Fetching user detail\", res);\n      setCurrentprofile({ ...currentProfile,\n        name: res.data.result.name,\n        id: res.data.result._id\n      });\n    }).catch(err => {\n      if (err) {\n        console.log(\"Error in fetching user details from the user\", email, err);\n      }\n    });\n  }, []);\n  const {\n    name,\n    profileImgPath,\n    buttonText,\n    id\n  } = currentProfile;\n  const [newName, setnewName] = useState(\"\");\n  useEffect(() => {\n    setnewName(name);\n  }, []);\n\n  const handleChange = event => {\n    setnewName(event.target.value);\n    setCurrentprofile({ ...currentProfile,\n      name: event.target.value\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    Axios.post(\"http://localhost:8000/blogs/update-fields-of-user\", {\n      id,\n      newName,\n      imgPath\n    }).then(res => {\n      console.log(\"Your fields updated successfully\", res);\n      localStorage.setItem(\"userNameInLocalStorage\", newName);\n      history.push(\"/user/dashboard\");\n    }).catch(err => console.log(\"Error in updating fields\", id, err));\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, \"Your Profile\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"change your profile pic\"), /*#__PURE__*/React.createElement(Uploadimage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"Update Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: name,\n    name: \"name\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    type: \"submit\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, buttonText))));\n};\n\nexport default UpdateProfile;","map":{"version":3,"sources":["C:/Users/Zabid/NS/blogsMajorProject/client/src/components/UpdateProfile.js"],"names":["React","useState","useEffect","useHistory","Axios","Layout","Uploadimage","useSelector","UpdateProfile","history","currentProfile","setCurrentprofile","name","profileImgPath","buttonText","id","uploadInfo","state","profileImg","imageID","imgPath","email","localStorage","getItem","post","then","res","console","log","data","result","_id","catch","err","newName","setnewName","handleChange","event","target","value","handleSubmit","preventDefault","setItem","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\nimport Layout from \"./Layout\";\r\nimport Uploadimage from \"./Uploadimage\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst UpdateProfile = () => {\r\n  const history = useHistory();\r\n\r\n  const [currentProfile, setCurrentprofile] = useState({\r\n    name: \"\",\r\n    profileImgPath: \"\",\r\n    buttonText: \"Save changes\",\r\n    id: \"\",\r\n  });\r\n  const uploadInfo = useSelector((state) => state);\r\n  const profileImg = uploadInfo.imageID;\r\n  const imgPath = uploadInfo.imgPath;\r\n\r\n  let email = localStorage.getItem(\"userEmailInLocalStorage\");\r\n\r\n  useEffect(() => {\r\n    Axios.post(\"http://localhost:8000/blogs/get-user-details\", {\r\n      email,\r\n    })\r\n      .then((res) => {\r\n        console.log(\"Success in Fetching user detail\", res);\r\n\r\n        setCurrentprofile({\r\n          ...currentProfile,\r\n          name: res.data.result.name,\r\n          id: res.data.result._id,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (err) {\r\n          console.log(\r\n            \"Error in fetching user details from the user\",\r\n            email,\r\n            err\r\n          );\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  const { name, profileImgPath, buttonText, id } = currentProfile;\r\n  const [newName, setnewName] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setnewName(name);\r\n  }, []);\r\n  const handleChange = (event) => {\r\n    setnewName(event.target.value);\r\n    setCurrentprofile({\r\n      ...currentProfile,\r\n      name: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    Axios.post(\"http://localhost:8000/blogs/update-fields-of-user\", {\r\n      id,\r\n      newName,\r\n      imgPath,\r\n    })\r\n      .then((res) => {\r\n        console.log(\"Your fields updated successfully\", res);\r\n        localStorage.setItem(\"userNameInLocalStorage\", newName);\r\n        history.push(\"/user/dashboard\");\r\n      })\r\n      .catch((err) => console.log(\"Error in updating fields\", id, err));\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"container\">\r\n        <h3>Your Profile</h3>\r\n        <div>change your profile pic</div>\r\n        <Uploadimage />\r\n      </div>\r\n      <form>\r\n        <div className=\"form-group\">\r\n          <label>Update Username</label>\r\n          <input type=\"text\" value={name} name=\"name\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <button\r\n            className=\"btn btn-primary\"\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n          >\r\n            {buttonText}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateProfile;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Zabid\\\\NS\\\\blogsMajorProject\\\\client\\\\src\\\\components\\\\Uploadimage.js\";\nimport React, { useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\n\nconst Uploadimage = () => {\n  const dispatch = useDispatch();\n  const [fileUpload, setFileUpload] = useState();\n  const [buttonAppearance, setButtonAppearance] = useState({\n    text: \"Upload\",\n    color: \"\"\n  });\n  const handleImageChange = useCallback(event => {\n    setFileUpload(event.target.files[0]);\n  }, []);\n  const handleUploadImage = useCallback(() => {\n    const data = new FormData();\n    data.append(\"myImage\", fileUpload);\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n    axios.post(\"/image-upload\", data, config).then(res => {\n      console.log(\"IMAGE UPLOAD SUCESS\", res);\n      setButtonAppearance({\n        text: \"Uploaded\",\n        color: \"#5B8930\"\n      });\n      dispatch({\n        type: \"SET_IMAGE_ID\",\n        id: res.data.document._id\n      });\n      dispatch({\n        type: \"SET_IMAGE_PATH\",\n        imgPath: res.data.document.imageData\n      });\n    }).catch(err => {\n      if (err) {\n        console.log(`IMAGE UPLOAD ERROR ${err}`);\n      }\n    });\n  }, [fileUpload]);\n  return /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    placeholder: \" Upload the image of the city\",\n    onChange: handleImageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    style: {\n      backgroundColor: buttonAppearance.color\n    },\n    onClick: handleUploadImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, buttonAppearance.text))));\n};\n\nexport default Uploadimage;","map":{"version":3,"sources":["C:/Users/Zabid/NS/blogsMajorProject/client/src/components/Uploadimage.js"],"names":["React","useState","useCallback","axios","useDispatch","Uploadimage","dispatch","fileUpload","setFileUpload","buttonAppearance","setButtonAppearance","text","color","handleImageChange","event","target","files","handleUploadImage","data","FormData","append","config","headers","post","then","res","console","log","type","id","document","_id","imgPath","imageData","catch","err","backgroundColor"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,QAA6C,OAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,MAAMC,WAAW,GAAG,MAAM;AACxB,QAAMC,QAAQ,GAAGF,WAAW,EAA5B;AACA,QAAM,CAACG,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,EAA5C;AACA,QAAM,CAACQ,gBAAD,EAAmBC,mBAAnB,IAA0CT,QAAQ,CAAC;AACvDU,IAAAA,IAAI,EAAE,QADiD;AAEvDC,IAAAA,KAAK,EAAE;AAFgD,GAAD,CAAxD;AAKA,QAAMC,iBAAiB,GAAGX,WAAW,CAAEY,KAAD,IAAW;AAC/CN,IAAAA,aAAa,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAb;AACD,GAFoC,EAElC,EAFkC,CAArC;AAIA,QAAMC,iBAAiB,GAAGf,WAAW,CAAC,MAAM;AAC1C,UAAMgB,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,SAAZ,EAAuBb,UAAvB;AAEA,UAAMc,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADI,KAAf;AAMAnB,IAAAA,KAAK,CACFoB,IADH,CACQ,eADR,EACyBL,IADzB,EAC+BG,MAD/B,EAEGG,IAFH,CAESC,GAAD,IAAS;AACbC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCF,GAAnC;AACAf,MAAAA,mBAAmB,CAAC;AAClBC,QAAAA,IAAI,EAAE,UADY;AAElBC,QAAAA,KAAK,EAAE;AAFW,OAAD,CAAnB;AAIAN,MAAAA,QAAQ,CAAC;AACPsB,QAAAA,IAAI,EAAE,cADC;AAEPC,QAAAA,EAAE,EAAEJ,GAAG,CAACP,IAAJ,CAASY,QAAT,CAAkBC;AAFf,OAAD,CAAR;AAIAzB,MAAAA,QAAQ,CAAC;AACPsB,QAAAA,IAAI,EAAE,gBADC;AAEPI,QAAAA,OAAO,EAAEP,GAAG,CAACP,IAAJ,CAASY,QAAT,CAAkBG;AAFpB,OAAD,CAAR;AAID,KAhBH,EAiBGC,KAjBH,CAiBUC,GAAD,IAAS;AACd,UAAIA,GAAJ,EAAS;AACPT,QAAAA,OAAO,CAACC,GAAR,CAAa,sBAAqBQ,GAAI,EAAtC;AACD;AACF,KArBH;AAsBD,GAhCoC,EAgClC,CAAC5B,UAAD,CAhCkC,CAArC;AAkCA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,WAAW,EAAC,+BAHd;AAIE,IAAA,QAAQ,EAAEM,iBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,iBAFZ;AAGE,IAAA,KAAK,EAAE;AAAEuB,MAAAA,eAAe,EAAE3B,gBAAgB,CAACG;AAApC,KAHT;AAIE,IAAA,OAAO,EAAEK,iBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGR,gBAAgB,CAACE,IANpB,CADF,CARF,CADF,CADF;AAuBD,CArED;;AAuEA,eAAeN,WAAf","sourcesContent":["import React, { useState, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Uploadimage = () => {\r\n  const dispatch = useDispatch();\r\n  const [fileUpload, setFileUpload] = useState();\r\n  const [buttonAppearance, setButtonAppearance] = useState({\r\n    text: \"Upload\",\r\n    color: \"\",\r\n  });\r\n\r\n  const handleImageChange = useCallback((event) => {\r\n    setFileUpload(event.target.files[0]);\r\n  }, []);\r\n\r\n  const handleUploadImage = useCallback(() => {\r\n    const data = new FormData();\r\n    data.append(\"myImage\", fileUpload);\r\n\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"multipart/form-data\",\r\n      },\r\n    };\r\n\r\n    axios\r\n      .post(\"/image-upload\", data, config)\r\n      .then((res) => {\r\n        console.log(\"IMAGE UPLOAD SUCESS\", res);\r\n        setButtonAppearance({\r\n          text: \"Uploaded\",\r\n          color: \"#5B8930\",\r\n        });\r\n        dispatch({\r\n          type: \"SET_IMAGE_ID\",\r\n          id: res.data.document._id,\r\n        });\r\n        dispatch({\r\n          type: \"SET_IMAGE_PATH\",\r\n          imgPath: res.data.document.imageData,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (err) {\r\n          console.log(`IMAGE UPLOAD ERROR ${err}`);\r\n        }\r\n      });\r\n  }, [fileUpload]);\r\n\r\n  return (\r\n    <form>\r\n      <div>\r\n        <input\r\n          type=\"file\"\r\n          name=\"file\"\r\n          placeholder=\" Upload the image of the city\"\r\n          onChange={handleImageChange}\r\n        />\r\n\r\n        <div className=\"mt-2\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            style={{ backgroundColor: buttonAppearance.color }}\r\n            onClick={handleUploadImage}\r\n          >\r\n            {buttonAppearance.text}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Uploadimage;\r\n"]},"metadata":{},"sourceType":"module"}
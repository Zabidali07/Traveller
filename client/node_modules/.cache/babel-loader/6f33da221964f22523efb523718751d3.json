{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Zabid\\\\NS\\\\blogsMajorProject\\\\client\\\\src\\\\components\\\\UpdateProfile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport Layout from \"./Layout\";\n\nconst UpdateProfile = () => {\n  const history = useHistory();\n  const [currentProfile, setCurrentprofile] = useState({\n    name: \"\",\n    profileImgPath: \"\",\n    buttonText: \"Save changes\",\n    id: \"\"\n  });\n  let email = localStorage.getItem(\"userEmailInLocalStorage\");\n  useEffect(() => {\n    Axios.post(\"http://localhost:8000/blogs/get-user-details\", {\n      email\n    }).then(res => {\n      console.log(\"Success in Fetching user detail\", res);\n      setCurrentprofile({ ...currentProfile,\n        name: res.data.result.name,\n        id: res.data.result._id\n      });\n    }).catch(err => {\n      if (err) {\n        console.log(\"Error in fetching user details from the user\", email, err);\n      }\n    });\n  }, []);\n  const {\n    name,\n    profileImgPath,\n    buttonText,\n    id\n  } = currentProfile;\n  const [newName, setnewName] = useState(\"\");\n  useEffect(() => {\n    setnewName(name);\n  }, []);\n\n  const handleChange = event => {\n    setnewName(event.target.value);\n    setCurrentprofile({ ...currentProfile,\n      name: event.target.value\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    Axios.post(\"http://localhost:8000/blogs/update-fields-of-user\", {\n      id,\n      newName\n    }).then(res => {\n      console.log(\"Your fields updated successfully\", res);\n      history.push(\"/user/dashboard\");\n    }).catch(err => console.log(\"Error in updating fields\", id, err));\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"Your Profile\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \"change your profile pic\")), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, \"Update Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: name,\n    name: \"name\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    type: \"submit\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, buttonText))));\n};\n\nexport default UpdateProfile;","map":{"version":3,"sources":["C:/Users/Zabid/NS/blogsMajorProject/client/src/components/UpdateProfile.js"],"names":["React","useState","useEffect","useHistory","Axios","Layout","UpdateProfile","history","currentProfile","setCurrentprofile","name","profileImgPath","buttonText","id","email","localStorage","getItem","post","then","res","console","log","data","result","_id","catch","err","newName","setnewName","handleChange","event","target","value","handleSubmit","preventDefault","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\nimport Layout from \"./Layout\";\r\n\r\nconst UpdateProfile = () => {\r\n  const history = useHistory();\r\n\r\n  const [currentProfile, setCurrentprofile] = useState({\r\n    name: \"\",\r\n    profileImgPath: \"\",\r\n    buttonText: \"Save changes\",\r\n    id: \"\",\r\n  });\r\n  let email = localStorage.getItem(\"userEmailInLocalStorage\");\r\n\r\n  useEffect(() => {\r\n    Axios.post(\"http://localhost:8000/blogs/get-user-details\", {\r\n      email,\r\n    })\r\n      .then((res) => {\r\n        console.log(\"Success in Fetching user detail\", res);\r\n\r\n        setCurrentprofile({\r\n          ...currentProfile,\r\n          name: res.data.result.name,\r\n          id: res.data.result._id,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (err) {\r\n          console.log(\r\n            \"Error in fetching user details from the user\",\r\n            email,\r\n            err\r\n          );\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  const { name, profileImgPath, buttonText, id } = currentProfile;\r\n  const [newName, setnewName] = useState(\"\");\r\n\r\n   useEffect(() => {\r\n     setnewName(name)\r\n   }, [])\r\n  const handleChange = (event) => {\r\n    setnewName(event.target.value);\r\n    setCurrentprofile({\r\n      ...currentProfile,\r\n      name: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n   \r\n\r\n    Axios.post(\"http://localhost:8000/blogs/update-fields-of-user\", {\r\n      id, newName\r\n    })\r\n      .then((res) => {\r\n        console.log(\"Your fields updated successfully\", res);\r\n        history.push(\"/user/dashboard\");\r\n      })\r\n      .catch((err) => console.log(\"Error in updating fields\", id, err));\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"container\">\r\n        <h3>Your Profile</h3>\r\n        <div>change your profile pic</div>\r\n      </div>\r\n      <form>\r\n        <div className=\"form-group\">\r\n          <label>Update Username</label>\r\n          <input\r\n            type=\"text\"\r\n            value={name}\r\n            name=\"name\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button\r\n            className=\"btn btn-primary\"\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n          >\r\n            {buttonText}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateProfile;\r\n"]},"metadata":{},"sourceType":"module"}
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{175:function(e,t,a){e.exports=a(327)},181:function(e,t,a){},212:function(e,t){},214:function(e,t){},228:function(e,t){},230:function(e,t){},258:function(e,t){},260:function(e,t){},261:function(e,t){},267:function(e,t){},269:function(e,t){},287:function(e,t){},290:function(e,t){},306:function(e,t){},309:function(e,t){},326:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(19),r=a.n(l),o=(a(180),a(181),a(14)),s=a(10),m=a(1),i=a(4),u=a(8),d=a.n(u),g=a(69),E=a.n(g),b=function(e){if("undefined"!==window)return E.a.get(e)},p=function(e,t){var a,n;console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),a="token",n=e.data.token,"undefined"!==window&&E.a.set(a,n,{expires:1}),function(e,t){"undefined"!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},f=function(){if("undefined"!==window)return!!b("token")&&(!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")))},h=function(e){var t;t="token","undefined"!==window&&E.a.remove(t,{expires:1}),function(e){"undefined"!==window&&localStorage.removeItem(e)}("user"),e()},v=a(15),O=a(334),N=a(172),j=Object(s.h)((function(e){var t=e.children,a=e.match,l=e.history,r=(Object(v.b)(),function(e){return a.path===e?{color:"#F0E68C"}:{color:"#00FFFF"}});return c.a.createElement(n.Fragment,null,c.a.createElement("ul",{className:"nav nav-tabs custom-navbar"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/",className:"nav-link",style:r("/")},"Traveller")),!f()&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/signup",className:"nav-link",style:r("/signup")},"Signup")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/signin",className:"nav-link",style:r("/signin")},"Login"))),f()&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/user/dashboard",className:"nav-link",style:r("/user/dashboard")},"Dashboard")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#fff"},onClick:function(){h((function(){l.push("/"),localStorage.clear()}))}},"Signout")),c.a.createElement("div",{className:"navbar-right"},c.a.createElement("li",{className:"nav-item "},c.a.createElement(O.a,{title:"View Profile"},c.a.createElement(N.a.Item,{href:"/user/posts"},"My Posts"),c.a.createElement(N.a.Item,{href:"/user/update-profile"},"Profile"),c.a.createElement(N.a.Item,{href:"/add-new-article"},"Add new Article")))))),c.a.createElement("div",{className:"container-fluid"},t))})),y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),u=(s[0],s[1],Object(n.useState)("")),g=Object(i.a)(u,2),E=(g[0],g[1]),b=Object(n.useState)([]),p=Object(i.a)(b,2),f=(p[0],p[1],Object(n.useState)({path:"",name:"",email:""})),h=Object(i.a)(f,2),v=h[0],O=h[1];Object(n.useEffect)((function(){d.a.get("/all-posts").then((function(e){console.log("fetching posts from server SUCCESS",e),l(e.data.result),console.log(a)})).catch((function(e){console.log("Error in fetching from database",e)}))}),[]);return c.a.createElement(j,null,c.a.createElement("div",{style:{background:"#0b0c10"}},c.a.createElement("div",{id:"myModal",className:"modal w-50"},c.a.createElement("div",{className:"container mt-5 custom-top"},c.a.createElement("div",null,c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"}," ",c.a.createElement("img",{className:"card-img-top img-fluid",src:v.path})),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("span",{className:"close",onClick:function(){console.log("calling closePopup"),document.getElementById("myModal").style.display="none"}},"\xd7"),c.a.createElement("h4",{className:"card-title",onClick:function(){return console.log("cliclk ".concat(v.email))}},v.name),c.a.createElement("p",{className:"card-text"}," ",c.a.createElement("span",null,c.a.createElement("img",{src:"../mail3.png"}))," ",": ",v.email))))))),c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Blog Posts"),c.a.createElement("div",{className:"nav"}," ",c.a.createElement("li",null,c.a.createElement(o.b,{to:"/add-new-article",className:"navbar-left"},"Add New Article")," ")),c.a.createElement("div",null,a.map((function(e,t){var a,n="/user/dashboard/"+e._id;return c.a.createElement("div",{className:"card mt-4 ",key:e._id,style:{background:"#66fcf1"}},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("img",{src:e.imagePath,className:"card-img img-fluid",alt:"lol"})),c.a.createElement("div",{className:"col-md-8"},c.a.createElement("div",{className:"card-title text-center",style:{fontWeight:"bold",fontSize:"20px",letterSpacing:"2px"}}," ",e.title),c.a.createElement("div",{className:"card-body"}," ",e.description,c.a.createElement("p",null,e.markdown),e.cusineImagesPath.map((function(e,t){return c.a.createElement("img",{key:t,src:e,className:"col-md-4"})}))," ",c.a.createElement("div",null," ",c.a.createElement(o.b,{to:n},"Read more")," ")),c.a.createElement("div",{className:"float-right"},c.a.createElement("br",null),"posted by:",c.a.createElement("button",{className:"btn btn-primary",onClick:(a=e.postedByEmail,function(){console.log("calling my func ==>"+a),d.a.post("/get-user-details",{email:a}).then((function(e){console.log("Success in Fetching user detail",a,e);var t=String(e.data.result.profileImgPath);t="http://localhost:8000/uploads/"+t.substr(15),O(Object(m.a)(Object(m.a)({},v),{},{name:e.data.result.name,path:String(e.data.result.profileImgPath),email:e.data.result.email}))})).catch((function(e){e&&console.log("Error in fetching user details from the user",a,e)})),E(a),document.getElementById("myModal").style.display="block"})}," ",e.author)))))}))))))},S=a(170),w=(a(208),function(){return c.a.createElement("div",null,c.a.createElement(S.Carousel,{showThumbs:!1,autoPlay:!0,infiniteLoop:!0,dynamicHeight:!0},c.a.createElement("div",null,c.a.createElement("img",{src:"../travel-lady-home-bg.jpg",style:{height:"400px"},alt:"Adventure"}),c.a.createElement("p",{className:"legend",style:{fontSize:"15px"}},"THE ADVENTURE YOU HAVE")),c.a.createElement("div",null,c.a.createElement("img",{src:"../home-bg.jpg",style:{height:"400px"},alt:"Adventure"}),c.a.createElement("h1",{className:"legend",style:{fontSize:"15px"}},"It is better to travel well than to arrive.")),c.a.createElement("div",null,c.a.createElement("img",{src:"../travel-landscape-home-bg.jpg",style:{height:"400px"},alt:"Adventure"}),c.a.createElement("h1",{className:"legend",style:{fontSize:"15px"}},"A mind that is stretched by a new experience can never go back to its old dimensions."))))}),I=a(20),A=a(12),P=function(){var e=Object(v.b)(),t=Object(s.g)(),a=Object(n.useState)({email:"",password:"",buttonText:"Login"}),l=Object(i.a)(a,2),r=l[0],u=l[1],g=r.buttonText,E=r.email,b=r.password,h=E,O="",N=function(e){u(Object(m.a)(Object(m.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))},y=function(a){a.preventDefault(),u(Object(m.a)(Object(m.a)({},r),{},{buttonText:"Submitting..."})),d.a.post("/signin",{email:E,password:b}).then((function(a){console.log("SIGNED UP SUCCESS!!",a),d.a.post("/get-user-details",{email:E}).then((function(t){O=t.data.result.name,e({type:"GET_NAME",useremail:h,name2:O}),localStorage.setItem("userNameInLocalStorage",O),localStorage.setItem("userEmailInLocalStorage",h),console.log("receving name sucess",O,h)})).catch((function(e){console.log("error in receveing name",e)})),p(a,(function(){u(Object(m.a)(Object(m.a)({},r),{},{name:"",email:"",password:"",buttonText:"Submitted"})),f()?(console.log(h),t.push("/user/dashboard")):t.push("/")}))})).catch((function(e){e&&e.response&&e.response.data&&A.b.error(e.response.data.error),u(Object(m.a)(Object(m.a)({},r),{},{buttonText:"Submit"}))}))};return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(j,null),c.a.createElement("div",{className:"row mt-5 "},c.a.createElement("div",{className:"col-md-4"}),c.a.createElement("div",{className:"col-md-4",style:{background:"#282828",borderRadius:"10px"}},c.a.createElement(A.a,null),c.a.createElement("h1",{className:"p-5 text-center",style:{color:"#5cdb95",fontWeight:"bold"}},"Log in"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{style:{color:"#FEBE10"}},"Email"),c.a.createElement("input",{onChange:N,name:"email",type:"email",value:E,className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{style:{color:"#FEBE10"}},"Password"),c.a.createElement("input",{onChange:N,name:"password",type:"password",value:b,className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{type:"button",className:"btn mb-4",onClick:y,style:{background:"#8ee4af",fontWeight:"400"}},g))),c.a.createElement(o.b,{to:"/traveller/password/forgot",className:"btn btn-sm btn-outline-danger mb-2"},"Forgot Password")))))},k=function(){return c.a.createElement(j,null,c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row",style:{background:"#2c3e50"}},c.a.createElement("div",{className:"container"},c.a.createElement(w,null))),c.a.createElement("div",{className:"row",style:{background:"#bdc3c7"}},c.a.createElement("div",{className:"container mt-5"},c.a.createElement("h2",null,"About"),c.a.createElement("p",{className:"text-center"},"A traveller is someone who travels around the world collecting their own adventures.Then writing about their travel experiences, and building the desires of others."))),c.a.createElement("div",{className:"row",style:{background:"#bdc3c7"}},c.a.createElement("div",{className:"container mt-5 float-right"},c.a.createElement("h2",null,"Contact info"),c.a.createElement("div",null," ",c.a.createElement("img",{src:"../gmail.png"}),c.a.createElement("span",{className:"ml-2"}," zabid1998@gmail.com")),c.a.createElement("div",null," ",c.a.createElement("img",{src:"../linkedin.png"}),c.a.createElement("span",{className:"ml-2"}," https://linkedin.com/in/zabidali"))))))},x=function(){var e=Object(v.b)(),t=Object(n.useState)(),a=Object(i.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)({text:"Upload",color:""}),s=Object(i.a)(o,2),m=s[0],u=s[1],g=Object(n.useCallback)((function(e){r(e.target.files[0])}),[]),E=Object(n.useCallback)((function(){var t=new FormData;t.append("myImage",l);d.a.post("/image-upload",t,{headers:{"content-type":"multipart/form-data"}}).then((function(t){console.log("IMAGE UPLOAD SUCESS",t),u({text:"Uploaded",color:"#5B8930"}),e({type:"SET_IMAGE_ID",id:t.data.document._id}),e({type:"SET_IMAGE_PATH",imgPath:t.data.document.imageData})})).catch((function(e){e&&console.log("IMAGE UPLOAD ERROR ".concat(e))}))}),[l]);return c.a.createElement("form",null,c.a.createElement("div",null,c.a.createElement("input",{type:"file",name:"file",placeholder:" Upload the image of the city",onChange:g}),c.a.createElement("div",{className:"mt-2"},c.a.createElement("button",{type:"button",className:"btn btn-primary",style:{backgroundColor:m.color},onClick:E},m.text))))},C=function(e){var t=e.setCusine,a=Object(v.b)(),l=Object(n.useState)({}),r=Object(i.a)(l,2),o=r[0],s=r[1],m=Object(n.useState)({text:"Upload",color:""}),u=Object(i.a)(m,2),g=u[0],E=u[1],b=[],p=Object(n.useCallback)((function(e){s(e.target.files)}),[]),f=Object(n.useCallback)((function(e){e.preventDefault();for(var n=new FormData,c=0,l=Object.keys(o);c<l.length;c++){var r=l[c];n.append("imgCollection",o[r])}d.a.post("/image-upload-array",n,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log("IMAGE UPLOAD SUCESS",e.data.document.imgCollection);for(var n=0;n<e.data.document.imgCollection.length;n++)b.push(n);t(e.data.document.imgCollection),localStorage.setItem("getNoOfCusineImages",e.data.document.imgCollection.length),E({text:"Uploaded",color:"#5B8930"}),a({type:"SET_IMAGE_ARRAY_ID",imgArrayId:e.data.document._id}),a({type:"SET_IMAGE_ARRAY_PATH",imgArrayPath:e.data.document.imgCollection}),a({type:"SET_IMAGE_ARRAY_LENGTH",imgArrayLength:e.data.document.imgCollection.length})})).catch((function(e){e&&console.log("IMAGE UPLOAD ERROR ".concat(e))}))}),[o]);return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("form",{onSubmit:f},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"file",name:"imgCollection",onChange:p,multiple:!0}),c.a.createElement("div",{className:"form-group mt-2"}," ",c.a.createElement("button",{className:"btn btn-primary",style:{backgroundColor:g.color},type:"submit"},g.text))))))},T=function(e){var t=e.setVisited,a=Object(v.b)(),l=Object(n.useState)({}),r=Object(i.a)(l,2),o=r[0],s=r[1],m=Object(n.useState)({text:"Upload",color:""}),u=Object(i.a)(m,2),g=u[0],E=u[1],b=Object(n.useCallback)((function(e){s(e.target.files)}),[]),p=Object(n.useCallback)((function(e){e.preventDefault();for(var n=new FormData,c=0,l=Object.keys(o);c<l.length;c++){var r=l[c];n.append("imgCollection",o[r])}d.a.post("/image-upload-array",n,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log("IMAGE UPLOAD SUCESS",e),E({text:"Uploaded",color:"#5B8930"}),t(e.data.document.imgCollection),a({type:"SET_VISIT_IMAGE_ARRAY_ID",imgVisitArrayId:e.data.document._id}),a({type:"SET_VISIT_IMAGE_ARRAY_PATH",imgVisitArrayPath:e.data.document.imgCollection}),a({type:"SET_VISIT_IMAGE_ARRAY_LENGTH",imgVisitArrayLength:e.data.document.imgCollection.length})})).catch((function(e){e&&console.log("IMAGE UPLOAD ERROR ".concat(e))}))}),[o]);return c.a.createElement("form",null,c.a.createElement("div",null,c.a.createElement("input",{type:"file",name:"imgCollection",onChange:b,multiple:!0})," ",c.a.createElement("div",{className:"mt-2"}," ",c.a.createElement("button",{className:"btn btn-primary",style:{backgroundColor:g.color},onClick:p},g.text))))},R=function(){var e=Object(s.g)(),t=Object(n.useState)({title:"",description:"",markdown:"",buttonText:"Submit",cusineImagesDescription:[],visitedPlacesImagesDescription:[]}),a=Object(i.a)(t,2),l=a[0],r=a[1],o=[],u=[],g=l.title,E=l.description,b=l.markdown,p=l.buttonText,f=Object(v.c)((function(e){return e})),h=localStorage.getItem("userNameInLocalStorage"),O=f.imageID,N=f.imgPath,y=localStorage.getItem("userEmailInLocalStorage"),S=f.imageArrayID,w=f.imageArrayPath,A=f.imageVisitArrayID,P=f.imageVisitArrayPath,k=Object(n.useState)([]),R=Object(i.a)(k,2),D=R[0],_=R[1],L=Object(n.useState)([]),M=Object(i.a)(L,2),G=M[0],U=M[1],V=Object(n.useState)([]),F=Object(i.a)(V,2),B=(F[0],F[1],Object(n.useState)({0:"",1:"",2:"",3:"",4:"",5:""})),H=Object(i.a)(B,2),Y=H[0],W=H[1],z=Object(n.useState)({0:"",1:"",2:"",3:"",4:"",5:""}),J=Object(i.a)(z,2),q=J[0],$=J[1],K=function(e){W(Object(m.a)(Object(m.a)({},Y),{},Object(I.a)({},e.target.name,e.target.value)))},Q=function(e){$(Object(m.a)(Object(m.a)({},q),{},Object(I.a)({},e.target.name,e.target.value)))},X=function(e){r(Object(m.a)(Object(m.a)({},l),{},Object(I.a)({},e.target.name,e.target.value)))};return c.a.createElement(j,null,c.a.createElement("div",null,c.a.createElement("div",{className:"container"},c.a.createElement("h2",{className:"text-center"},"Add New Article")),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("div",null," ","Upload the image of the city",c.a.createElement(x,null),c.a.createElement("br",null)),c.a.createElement("div",null," ","upload cusine image (upto 6 images)",c.a.createElement("br",null)," ",c.a.createElement(C,{setCusine:_})," "),c.a.createElement("div",null," ","upload visited place image (upto 6 images)",c.a.createElement("br",null)," ",c.a.createElement(T,{setVisited:U})," ")),c.a.createElement("div",{className:"col-md-8"},c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Title"),c.a.createElement("input",{className:"form-control",type:"text",name:"title",value:g,onChange:X})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Description"),c.a.createElement("textarea",{className:"form-control",type:"text",rows:"4",name:"description",value:E,onChange:X})),c.a.createElement("div",null,D.map((function(e,t){return c.a.createElement("div",{key:t,className:"form-group"},c.a.createElement("label",null,"Describe you ",t," cusine "),c.a.createElement("textarea",{className:"form-control",type:"text",rows:"2",name:t,onChange:K}))}))),c.a.createElement("div",null,G.map((function(e,t){return c.a.createElement("div",{key:t,className:"form-group"},c.a.createElement("label",null,"Describe you ",t," visited place "),c.a.createElement("textarea",{className:"form-control",type:"text",rows:"2",name:t,onChange:Q}))}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Markdown"),c.a.createElement("textarea",{rows:"3",className:"form-control",type:"text",name:"markdown",value:b,onChange:X})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(t){t.preventDefault(),console.log("gone gobn");for(var a=0;a<D.length;a++)o.push(Y[a]);for(var n=0;n<G.length;n++)u.push(q[n]);r(Object(m.a)(Object(m.a)({},l),{},{buttonText:"Submitting"})),d.a.post("/add-new-article",{title:g,description:E,markdown:b,author:h,images:O,imagePath:N,postedByEmail:y,cusineImages:S,cusineImagesPath:w,visitedPlaceImages:A,visitedPlacesImagesPath:P,cusineImagesDescription:o,visitedPlacesImagesDescription:u}).then((function(t){console.log("new article posted ".concat(t," and ").concat(h," and ").concat(O)),r(Object(m.a)(Object(m.a)({},l),{},{title:"",description:"",markdown:"",buttonText:"Submitted"})),e.push("/user/dashboard")})).catch((function(e){console.log("There is error while pushing to database from frontend ".concat(e))}))}},p))))))," ")},D=a(66),_=function(e){var t=e.component,a=e.restricted,n=Object(D.a)(e,["component","restricted"]);return c.a.createElement(s.b,Object.assign({},n,{render:function(e){return f()&&a?c.a.createElement(s.a,{to:"/user/dashboard"}):c.a.createElement(t,e)}}))},L=function(e){var t=e.component,a=Object(D.a)(e,["component"]);return c.a.createElement(s.b,Object.assign({},a,{render:function(e){return f()?c.a.createElement(t,e):c.a.createElement(s.a,{to:"/signin"})}}))},M=function(){var e="",t=Object(n.useState)({name:"",email:"",password:"",confirmPassword:"",buttonText:"Submit",borderPasswordColor:""}),a=Object(i.a)(t,2),l=a[0],r=a[1],o=l.buttonText,s=l.name,u=l.email,g=l.password,E=l.confirmPassword,b=function(t){var a;e=g===E?"red":"",r(Object(m.a)(Object(m.a)({},l),{},(a={},Object(I.a)(a,t.target.name,t.target.value),Object(I.a)(a,"borderPasswordColor",e),a)))},p=function(e){(e.preventDefault(),g!==E)?document.getElementById("myModal").classList.remove("display-none"):d.a.post("/signup",{name:s,email:u,password:g}).then((function(e){console.log("SIGNED UP SUCCESS!!",e),r({name:"",password:"",email:"",buttonText:"Submit"}),A.b.success(e.data.message)})).catch((function(e){e&&e.response&&e.response.data&&A.b.error(e.response.data.error),r(Object(m.a)(Object(m.a)({},l),{},{buttonText:"Submit"}))}));r(Object(m.a)(Object(m.a)({},l),{},{buttonText:"Submitting..."}))};return c.a.createElement(j,null,c.a.createElement("div",{id:"myModal",className:"mt-4 display-none float-right"},c.a.createElement("div",{className:"col",style:{backgroundColor:"#c1c8e4",color:"#886080",fontWeight:"300",fontSize:"18px"}}," ","Password Mismatch with Confirm Password",c.a.createElement("span",{className:"close float-right",onClick:function(){console.log("calling closePopup"),document.getElementById("myModal").classList.add("display-none")},style:{display:"inline-block",marginLeft:"10px"}},"\xd7"))),c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(A.a,null),c.a.createElement("h1",{className:"p-5 text-center"},"Sign up"),c.a.createElement("div",null,c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:b,name:"name",value:s,type:"text",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:b,name:"email",type:"email",value:u,className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:b,name:"password",type:"password",value:g,className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Confirm Password"),c.a.createElement("input",{onChange:b,name:"confirmPassword",type:"password",value:E,className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:p},o))))))},G="Request password reset link",U=function(e){e.history;var t=Object(n.useState)({email:"",buttonText:G}),a=Object(i.a)(t,2),l=a[0],r=a[1],o=l.email,s=l.buttonText,u=function(e){e.preventDefault(),r(Object(m.a)(Object(m.a)({},l),{},{buttonText:"Submitting"})),d.a.post("/forgot-password",{email:o}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),A.b.success(e.data.message),r(Object(m.a)(Object(m.a)({},l),{},{buttonText:G}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),A.b.error(e.response.data.error),r(Object(m.a)(Object(m.a)({},l),{},{buttonText:G}))}))};return c.a.createElement(j,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(A.a,null),c.a.createElement("h1",{className:"p-5 text-center"},"Forgot password"),function(){return c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:(e="email",function(t){r(Object(m.a)(Object(m.a)({},l),{},Object(I.a)({},e,t.target.value)))}),value:o,type:"email",className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:u},s)));var e}()))},V=a(64),F=a.n(V),B=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",newPassword:"",buttonText:"Reset password"}),l=Object(i.a)(a,2),r=l[0],o=l[1];Object(n.useEffect)((function(){var e=t.params.token,a=F.a.decode(e).name;e&&o((function(t){return Object(m.a)(Object(m.a)({},t),{},{name:a,token:e})}))}),[t.params.token]);var s=r.name,u=r.token,g=r.newPassword,E=r.buttonText,b=function(e){o(Object(m.a)(Object(m.a)({},r),{},{newPassword:e.target.value}))},p=function(e){e.preventDefault(),o(Object(m.a)(Object(m.a)({},r),{},{buttonText:"Submitting"})),d.a.post("/reset-password",{newPassword:g,resetPasswordLink:u}).then((function(e){console.log("RESET PASSWORD SUCCESS",e),A.b.success(e.data.message),o(Object(m.a)(Object(m.a)({},r),{},{buttonText:"Done"}))})).catch((function(e){console.log("RESET PASSWORD ERROR",e.response.data),A.b.error(e.response.data.error),o(Object(m.a)(Object(m.a)({},r),{},{buttonText:"Reset password"}))}))};return c.a.createElement(j,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(A.a,null),c.a.createElement("h1",{className:"p-5 text-center"},"Hey ",s,", Type your new password"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"New Password"),c.a.createElement("input",{onChange:b,value:g,type:"password",className:"form-control",placeholder:"Type new password",required:!0})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:p},E)))))},H=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",show:!0}),l=Object(i.a)(a,2),r=l[0],o=l[1];Object(n.useEffect)((function(){var e=t.params.token;if(e){var a=F.a.decode(e).name;o((function(t){return Object(m.a)(Object(m.a)({},t),{},{name:a,token:e})}))}}),[t.params.token]);var s=r.name,u=r.token,g=function(e){e.preventDefault(),d.a.post("/activate-account",{token:u}).then((function(e){console.log("ACCOUNT ACTIVATION",e),o(Object(m.a)(Object(m.a)({},r),{},{show:!1})),A.b.success(e.data.message)})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data.error),A.b.error(e.response.data.error)}))};return c.a.createElement(j,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(A.a,null),c.a.createElement("div",{className:"text-center"},c.a.createElement("h1",{className:"p-5"},"Hey ",s,", Ready to activate your account?"),c.a.createElement("button",{className:"btn btn-outline-primary",onClick:g},"Activate Account"))))},Y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(v.c)((function(e){return e})),o=localStorage.getItem("userEmailInLocalStorage");return Object(n.useEffect)((function(){d.a.post("/get-post-of-user",{postedByEmail:o}).then((function(e){console.log("Fetching each user posts",r,e),l(e.data.result)})).catch((function(e){console.log("Error in fetching from database",o,e)}))}),[]),c.a.createElement(j,null,c.a.createElement("h1",null,"MY Posts ",r.name),c.a.createElement("div",null,a.map((function(e){return c.a.createElement("div",{className:"card mt-4 custom-article-form",key:e._id},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("img",{src:e.imagePath,className:"card-img img-fluid",alt:"lol"})),c.a.createElement("div",{className:"col-md-8"},c.a.createElement("div",{className:"card-title"},e.title),c.a.createElement("div",{className:"card-body"},e.description,c.a.createElement("p",null,e.markdown),c.a.createElement("p",null,"posted by: ",e.author)))))}))))},W=function(){var e=Object(s.g)(),t=Object(n.useState)({name:"",profileImgPath:"",buttonText:"Save changes",id:""}),a=Object(i.a)(t,2),l=a[0],r=a[1],o=Object(v.c)((function(e){return e})).imgPath,u=localStorage.getItem("userEmailInLocalStorage");Object(n.useEffect)((function(){d.a.post("/get-user-details",{email:u}).then((function(e){console.log("Success in Fetching user detail",e),r(Object(m.a)(Object(m.a)({},l),{},{name:e.data.result.name,id:e.data.result._id}))})).catch((function(e){e&&console.log("Error in fetching user details from the user",u,e)}))}),[]);var g=l.name,E=(l.profileImgPath,l.buttonText),b=l.id,p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],O=f[1];Object(n.useEffect)((function(){O(g)}),[]);return c.a.createElement(j,null,c.a.createElement("div",{className:"container"},c.a.createElement("h3",null,"Your Profile"),c.a.createElement("div",null,"change your profile pic"),c.a.createElement(x,null)),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Update Username"),c.a.createElement("input",{type:"text",value:g,name:"name",onChange:function(e){O(e.target.value),r(Object(m.a)(Object(m.a)({},l),{},{name:e.target.value}))}})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(t){t.preventDefault(),d.a.post("/update-fields-of-user",{id:b,newName:h,imgPath:o}).then((function(t){console.log("Your fields updated successfully",t),localStorage.setItem("userNameInLocalStorage",h),e.push("/user/dashboard")})).catch((function(e){return console.log("Error in updating fields",b,e)}))}},E))))},z=function(e){var t=e.match,a=(Object(s.g)(),Object(n.useState)([])),l=Object(i.a)(a,2),r=l[0],m=l[1],u=Object(n.useState)(t.params.userToken),g=Object(i.a)(u,2),E=g[0];g[1];Object(n.useEffect)((function(){d.a.post("/get-user-details",{email:E}).then((function(e){console.log("Success in Fetching user detail",E,e),m(e.data.result)})).catch((function(e){e&&console.log("Error in fetching user details from the user",E,e)}))}),[]);var b=String(r.profileImgPath);return b="http://localhost:8000/uploads/"+b.substr(15),c.a.createElement("div",{className:"container mt-5 custom-top"},c.a.createElement("div",null,c.a.createElement(o.b,{to:"/user/dashboard",className:"custom-close"},"close"),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"}," ",c.a.createElement("img",{className:"card-img-top img-fluid",src:r.profileImgPath})),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("h4",{className:"card-title",onClick:function(){return console.log("cliclk ".concat(E))}},r.name),c.a.createElement("p",{className:"card-text"},E),c.a.createElement("p",null,b))))))},J=function(e){var t=e.match,a=Object(n.useState)([]),l=Object(i.a)(a,2),r=l[0],o=l[1],s=Object(n.useState)({author:"",cusineImagesPath:[],cusineImagesDescription:[],visitedPlacesImagesPath:[],visitedPlacesImagesDescription:[],title:"",description:"",markdown:"",imagePath:"",postedByEmail:""}),u=Object(i.a)(s,2),g=u[0],E=u[1],b=t.params.userToken;Object(n.useEffect)((function(){d.a.post("/get-one-article",{id:b}).then((function(e){console.log("fetching posts from server SUCCESS",e),o(e.data.result),E(Object(m.a)(Object(m.a)({},g),{},{author:e.data.result.author,cusineImagesPath:e.data.result.cusineImagesPath,cusineImagesDescription:e.data.result.cusineImagesDescription,visitedPlacesImagesPath:e.data.result.visitedPlacesImagesPath,visitedPlacesImagesDescription:e.data.result.visitedPlacesImagesDescription,title:e.data.result.title,description:e.data.result.description,markdown:e.data.result.markdown,imagePath:e.data.result.imagePath,postedByEmail:e.data.result.postedByEmail}))})).catch((function(e){e&&console.log("Error in fetching from database",e)}))}),[]);var p=g.author,f=g.cusineImagesPath,h=g.cusineImagesDescription,v=g.visitedPlacesImagesPath,O=g.visitedPlacesImagesDescription,N=g.title,y=g.description,S=g.markdown;g.imagePath,g.postedByEmail;return c.a.createElement("div",{className:"container-fluid custom-top-background-blog "},c.a.createElement(j,null,c.a.createElement("h1",{className:"text-center",style:{color:"#ba8b02",fontWeight:"500",letterSpacing:"5px"}},N," "),c.a.createElement("div",{className:"container "},c.a.createElement("div",{className:"row mt-3"},c.a.createElement("div",{className:"col-md-4"}," ",c.a.createElement("img",{src:r.imagePath,style:{height:"300px"},className:"img-responsive"})),c.a.createElement("div",{className:"col-md-8 text-center mt-10"}," ",y,c.a.createElement("br",null),S))),c.a.createElement("div",{className:"container "},c.a.createElement("div",{className:"row"},v.map((function(e,t){return c.a.createElement("div",{key:t,className:"col-md-4  mt-2 mb-2"},c.a.createElement("div",{className:"card custom-blog-background-card"}," ",c.a.createElement("img",{style:{height:"300px"},id:"imgCard",className:"card-img-top img-fluid mx-auto",src:e})," ",c.a.createElement("div",{className:"card-body",style:{color:"#ee9ca7"}}," ",O[t]," "))," ")})))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row overflow-auto"},f.map((function(e,t){return c.a.createElement("div",{key:t,className:"col-md-4"},c.a.createElement("div",{className:"card custom-blog-background-card "}," ",c.a.createElement("img",{id:"imgCard",className:"card-img-top img-fluid",src:e})," ",c.a.createElement("div",{className:"card-body",style:{color:"#ee9ca7"}}," ",h[t]," "))," ")}))),c.a.createElement("h2",{className:"float-right"},p))))},q=function(){return c.a.createElement(o.a,null,c.a.createElement(s.d,null,c.a.createElement(_,{path:"/",exact:!0,component:k}),c.a.createElement(_,{restricted:!0,path:"/signup",exact:!0,component:M}),c.a.createElement(_,{restricted:!0,path:"/signin",exact:!0,component:P}),c.a.createElement(_,{restricted:!0,path:"/traveller/activate/:token",exact:!0,component:H}),c.a.createElement(_,{restricted:!0,path:"/traveller/password/forgot",exact:!0,component:U}),c.a.createElement(_,{restricted:!0,path:"/traveller/reset/password/:token",exact:!0,component:B}),c.a.createElement(L,{restricted:!0,path:"/user/dashboard/showpopup/:userToken",exact:!0,component:z}),c.a.createElement(L,{path:"/user/dashboard",exact:!0,component:y}),c.a.createElement(L,{path:"/user/posts",exact:!0,component:Y}),c.a.createElement(L,{path:"/user/update-profile",exact:!0,component:W}),c.a.createElement(L,{path:"/add-new-article",exact:!0,component:R}),c.a.createElement(L,{restricted:!0,path:"/user/dashboard/:userToken",exact:!0,component:J})))},$=a(59),K={name:"",email:"",imageID:"",imgPath:"",imageArrayID:"",imageArrayPath:[],imageArrayLength:"",imageVisitArrayID:"",imageVisitArrayPath:[],imageVisitArrayLength:""},Q=Object($.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NAME":return console.log("get name calle ".concat(t.name2," , ").concat(t.useremail," ")),Object(m.a)(Object(m.a)({},e),{},{name:t.name2,email:t.useremail});case"SET_IMAGE_ID":return Object(m.a)(Object(m.a)({},e),{},{imageID:t.id});case"SET_IMAGE_PATH":return Object(m.a)(Object(m.a)({},e),{},{imgPath:t.imgPath});case"SET_IMAGE_ARRAY_ID":return Object(m.a)(Object(m.a)({},e),{},{imageArrayID:t.imgArrayId});case"SET_IMAGE_ARRAY_PATH":return Object(m.a)(Object(m.a)({},e),{},{imageArrayPath:t.imgArrayPath});case"SET_IMAGE_ARRAY_LENGTH":return Object(m.a)(Object(m.a)({},e),{},{imageArrayLength:t.imgArrayLength});case"SET_VISIT_IMAGE_ARRAY_ID":return Object(m.a)(Object(m.a)({},e),{},{imageVisitArrayID:t.imgVisitArrayId});case"SET_VISIT_IMAGE_ARRAY_PATH":return Object(m.a)(Object(m.a)({},e),{},{imageVisitArrayPath:t.imgVisitArrayPath});case"SET_VISIT_IMAGE_ARRAY_LENGTH":return Object(m.a)(Object(m.a)({},e),{},{imageVisitArrayLength:t.imgVisitArrayLength});case"RESET_STATE":return Object(m.a)(Object(m.a)({},e),{},{name:"",email:"",imageID:"",imgPath:"",imageArrayPath:"",imageArrayID:""});default:return e}}));a(326);d.a.defaults.baseURL="http://localhost:8000/blogs",d.a.interceptors.request.use((function(e){var t=b("token");return e.headers.Authorization=t,e})),d.a.interceptors.response.use(null,(function(e){return 401===e.response.status&&h((function(){window.location.href="/"})),Promise.reject(e)}));var X=function(){return c.a.createElement(v.a,{store:Q},c.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[175,1,2]]]);
//# sourceMappingURL=main.eb82aa91.chunk.js.map